<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock, Paper and Scissors</title>
</head>
<body>
    <script>
        const choices = ['rock','paper','scissors'];

        function getComputerChoice (){
            //Make it pick a random number between 0 and 2. The number picked will represent the index of the choices above
            let computer = choices[Math.floor(Math.random() * 3)];
            return computer;
        }

        function getUserChoice (){
            let userChoice = prompt('Enter: Rock, Paper or Scissors! ');
            userChoice = userChoice.toLowerCase();
            if (choices.indexOf(userChoice)=== -1){
                console.error('This is not a valid choice!');
                return 0;
            }
            return userChoice;
        }

        function playRound (userChoice, computerChoice){
            //returns 1: User wins
            //returns 0: User loses
            //returns 2: User tie
            if (userChoice === 'rock'){
                if (computerChoice === 'rock'){
                    return 2;
                } else if (computerChoice === 'paper'){
                    return 0;
                } else if (computerChoice === 'scissors'){
                    return 1;
                }
            }else if (userChoice === 'paper'){
                if (computerChoice === 'paper'){
                    return 2;
                }else if (computerChoice === 'scissors'){
                    return 0;
                }else if (computerChoice === 'rock'){
                    return 1;
                }
            }else if (userChoice === 'scissors'){
                if (computerChoice === 'scissors'){
                    return 2;
                }else if (computerChoice === 'rock'){
                    return 0;
                }else if (computerChoice === 'paper'){
                    return 1;
                }
            }
            return;
        }

        function play(rounds){
            let computerScore = 0;
            let userScore = 0;
            let userChoice = 0;
            for (let round = 1; round <=rounds;round++){
                while (userChoice === 0){
                    userChoice = getUserChoice();
                }
                let computerChoice = getComputerChoice();
                outcome = playRound(userChoice, computerChoice);
                console.log(`Round ${round}:`);
                if (outcome === 1){
                    userScore++;
                    console.log(`You win this round! ${userChoice} beats ${computerChoice}!`);
                } else if (outcome === 0){
                    computerScore++;
                    console.log(`You lose this round! ${computerChoice} beats ${userChoice}!`)
                } else {
                    console.log('It is a tie! Better luck next round!')
                }
                console.log(`User Score: ${userScore}. Computer Score: ${computerScore}`);
                userChoice = 0;
            }
            if (userScore > computerScore){
                console.log('Congradulations you win the game!');
            }else if (userScore < computerScore){
                console.log('Sorry the computer has gotten you this time!');
            } else {
                console.log('It is a tie, try playing again!');
            }
        }

    </script>
    
</body>
</html>